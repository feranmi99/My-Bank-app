<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>Document</title>
    <style>
        body {
            background-color: black;
            color: white;
        }
    </style>
</head>
<body>
    <nav class=" sticky-bottom " >
        <div class="d-flex justify-content-between ">
            <a href="./dashborad.html">
                <div class="col border text-center rounded-4 bg-warning">
                    <i class="fa-solid fa-building-columns  fw-bold fs-1"></i> <br>
                    <a class="navbar-brand fw-bold fs-5 " href="./dashborad.html">Home</a>
        
                </div>

            </a>
            <a href="">
                <div class="col border text-center rounded-4 bg-warning">
                    <i class="fa-regular fa-credit-card fw-bold fs-1"></i> <br>
                    <a class="navbar-brand fw-bold fs-5 " href="./card.html">card</a>
                </div>
            </a>
            <a href="">
                <div class="col border text-center rounded-4 bg-warning">
                    <i class="fa-solid fa-user fw-bold fs-1"></i> <br>
                    <a class="navbar-brand fw-bold fs-5 " href="/user.html">Me</a>
                </div>
            </a>
        </div>
    </nav>
    <div>
        <div class="text-center fs-4 fw-bold card sticky-top text-dark ">
            Add Money
        </div>
        <p class="mx-3 p-3">Add money to Via Mobile or internet banking</p>
        <div class=" container" style="border: 4px solid gold;border-radius: 10px;">
            <div class="mx-3 border p-3 card">
                <label for="" class="fw-bold">Bank</label>
                <select name="name" id="selet">
                    <option value="opay">Opay</option>
                    <option value="Accesse bank">Accesse bank</option>
                    <option value="Wema bank">Wema bank</option>
                    <option value="Palmpay">Palmpay</option>
                    <option value="Kuda">Kuda</option>
                    <option value="GT-bank">GT-bank</option>
                </select>
            </div>
        </div>
        <div class="mx-2 my-4">
            <label for="" class="fw-bold">Amount</label>
            <input type="number" class="form-control my-3" placeholder="# 100.00-5,000,000.00" id="Amounts">
            <button class="btn btn-warning w-100 fw-bold fs-3" onclick="pays()">pays</button>
        </div>
        <div class="fs-4 fw-bold" id="info"></div>
        <div id="err" class="text-center text-danger fs-4 fw-bold"></div>
    <div id="sucsse" class="text-center text-success fs-4 fw-bold"></div>
    </div>
    <script>
        let now = new Date();
        currentTime = now.toLocaleTimeString()
        console.log(currentTime);

        let localData = JSON.parse(localStorage.getItem("key"))
        let alluser = JSON.parse(localStorage.getItem("Mybank"))
        let storageData = JSON.parse(localStorage.getItem('balance'))
        let localhistory = JSON.parse(localStorage.getItem('myhistory'))

        let doll= [];
        if (localStorage.myhistory) {
            doll = JSON.parse(localStorage.getItem("myhistory")) 
            
        }

        console.log(localData);
        console.log(doll);

        let found =  alluser.find((value, index) =>(value.accountnumber === localData))
        if(found){
        info.innerHTML = `
            <span class="text">Your Account No: ${found.accountnumber}</span>
            `
        }


        let word = "Doposit";
        const pays = () => {
            let amounts = document.getElementById("Amounts").value;
            console.log(Amounts.value);
            amounts = Number(amounts);
            let capital = storageData + amounts;
            console.log(capital);
            localStorage.setItem('balance', JSON.stringify(capital));
            
            if (amounts == "" ) {
                err.innerHTML = "Transaction Fail";
            } else  {
                let user = {
                    word:word,
                    accountnumber: found.accountnumber,
                    Amount: Amounts.value,
                    selet: selet.value,
                    currentTime: currentTime,
                }
                doll.push(user),
                console.log(doll);
                sucsse.innerHTML = `<img src="./green-checkmark.png" alt=""> Transation Sucsseful`;
                
                localStorage.setItem("myhistory",JSON.stringify(doll) );
                setTimeout(() => {
                    window.location.href = "dashborad.html"
                }, 3000);
            } 
            accountnumber.value = ""
            selet.value = ""

        }
        
        
    </script>
</body>
</html>